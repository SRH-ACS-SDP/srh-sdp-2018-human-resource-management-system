-- MySQL Script generated by MySQL Workbench
-- Thu May 31 16:13:56 2018
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`COUNTRIES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`COUNTRIES` (
  `COUNTRY_ID` INT(3) NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(50) NOT NULL,
  `LANGUAGE` VARCHAR(50) NOT NULL,
  `CURRENCY` VARCHAR(3) NOT NULL,
  `TAX_RATE` FLOAT(4,2) NOT NULL,
  PRIMARY KEY (`COUNTRY_ID`),
  UNIQUE INDEX `COUNTRY_NAME_UNIQUE` (`NAME` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`LOCATIONS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`LOCATIONS` (
  `LOCATION_ID` INT(4) NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(50) NOT NULL,
  `ADDRESS` VARCHAR(100) NOT NULL,
  `DETAILS` VARCHAR(500) NULL,
  `COUNTRY_ID` INT(3) NOT NULL,
  PRIMARY KEY (`LOCATION_ID`),
  INDEX `COUNTRY_ID_idx` (`COUNTRY_ID` ASC),
  CONSTRAINT `L_COUNTRY_ID`
    FOREIGN KEY (`COUNTRY_ID`)
    REFERENCES `mydb`.`COUNTRIES` (`COUNTRY_ID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`EMPLOYEES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`EMPLOYEES` (
  `EMPLOYEE_ID` INT(9) NOT NULL AUTO_INCREMENT,
  `FIRST_NAME` VARCHAR(50) NOT NULL,
  `LAST_NAME` VARCHAR(50) NOT NULL,
  `GENDER` VARCHAR(10) NOT NULL,
  `DATE_OF_BIRTH` DATE NOT NULL,
  `DATE_JOINED` DATE NOT NULL,
  `DATE_LEFT` DATE NULL,
  `PHONE_NUMBER` VARCHAR(15) NOT NULL,
  `E_MAIL` VARCHAR(255) NOT NULL,
  `MARITAL_STATUS` VARCHAR(20) NOT NULL,
  `DETAILS` VARCHAR(100) NULL,
  PRIMARY KEY (`EMPLOYEE_ID`),
  UNIQUE INDEX `EMPLOYEE_E_MAIL_UNIQUE` (`E_MAIL` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`COURSES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`COURSES` (
  `COURSE_ID` INT(8) NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(50) NOT NULL,
  `DESCRIPTION` VARCHAR(500) NOT NULL,
  `REQUIRED_SKILLS` VARCHAR(100) NULL,
  `ACQUIRED_SKILLS` VARCHAR(100) NOT NULL,
  `MENTOR_SKILLS` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`COURSE_ID`),
  UNIQUE INDEX `COURSE_NAME_UNIQUE` (`NAME` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`TRAININGS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`TRAININGS` (
  `TRAINING_ID` INT(6) NOT NULL AUTO_INCREMENT,
  `EMPLOYEE_ID` VARCHAR(500) NULL,
  `COURSE_ID` INT(5) NOT NULL,
  `CONDUCTOR_ID` INT(9) NOT NULL,
  `DATE` DATE NULL,
  `RESULT` VARCHAR(500) NULL,
  PRIMARY KEY (`TRAINING_ID`),
  INDEX `COURSE_ID_idx` (`COURSE_ID` ASC),
  INDEX `CONDUCTOR_ID_idx` (`CONDUCTOR_ID` ASC),
  CONSTRAINT `T_COURSE_ID`
    FOREIGN KEY (`COURSE_ID`)
    REFERENCES `mydb`.`COURSES` (`COURSE_ID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `T_CONDUCTOR_ID`
    FOREIGN KEY (`CONDUCTOR_ID`)
    REFERENCES `mydb`.`EMPLOYEES` (`EMPLOYEE_ID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`PERFORMANCE_REVIEWS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`PERFORMANCE_REVIEWS` (
  `EMPLOYEE_ID` INT(9) NOT NULL,
  `REVIEWER_ID` INT(9) NOT NULL,
  `COMMENT` VARCHAR(500) NOT NULL,
  `RATING` DECIMAL(2) NOT NULL,
  `DATE` DATE NOT NULL,
  INDEX `EMPLOYEE_ID_idx` (`EMPLOYEE_ID` ASC),
  INDEX `REVIEWER_ID_idx` (`REVIEWER_ID` ASC),
  CONSTRAINT `PR_EMPLOYEE_ID`
    FOREIGN KEY (`EMPLOYEE_ID`)
    REFERENCES `mydb`.`EMPLOYEES` (`EMPLOYEE_ID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `PR_REVIEWER_ID`
    FOREIGN KEY (`REVIEWER_ID`)
    REFERENCES `mydb`.`EMPLOYEES` (`EMPLOYEE_ID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`SKILLS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`SKILLS` (
  `SKILL_ID` INT(8) NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(50) NOT NULL,
  `DESCRIPTION` VARCHAR(500) NOT NULL,
  `DIFFICULT` INT(2) NOT NULL,
  PRIMARY KEY (`SKILL_ID`),
  UNIQUE INDEX `SKILL_NAME_UNIQUE` (`NAME` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`EMPLOYEES_SKILLS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`EMPLOYEES_SKILLS` (
  `EMPLOYEE_ID` INT(9) NOT NULL,
  `SKILL_ID` INT(8) NOT NULL,
  `TRAINING_ID` INT(6) NOT NULL,
  INDEX `EMPLOYEE_ID_idx` (`EMPLOYEE_ID` ASC),
  INDEX `SKILL_ID_idx` (`SKILL_ID` ASC),
  INDEX `TRAINING_ID_idx` (`TRAINING_ID` ASC),
  CONSTRAINT `ES_EMPLOYEE_ID`
    FOREIGN KEY (`EMPLOYEE_ID`)
    REFERENCES `mydb`.`EMPLOYEES` (`EMPLOYEE_ID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `ES_SKILL_ID`
    FOREIGN KEY (`SKILL_ID`)
    REFERENCES `mydb`.`SKILLS` (`SKILL_ID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `ES_TRAINING_ID`
    FOREIGN KEY (`TRAINING_ID`)
    REFERENCES `mydb`.`TRAININGS` (`TRAINING_ID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`EMPLOYEES_DEPENDABLES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`EMPLOYEES_DEPENDABLES` (
  `EMPLOYEE_ID` INT(9) NOT NULL,
  `BIRTHDATE` DATE NOT NULL,
  INDEX `EMPLOYEE_ID_idx` (`EMPLOYEE_ID` ASC),
  CONSTRAINT `ED_EMPLOYEE_ID`
    FOREIGN KEY (`EMPLOYEE_ID`)
    REFERENCES `mydb`.`EMPLOYEES` (`EMPLOYEE_ID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`JOBS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`JOBS` (
  `JOB_ID` INT(9) NOT NULL AUTO_INCREMENT,
  `TITLE` VARCHAR(50) NOT NULL,
  `DESCRIPTION` VARCHAR(500) NOT NULL,
  `MIN_SALARY` DOUBLE(11,2) NOT NULL,
  `MAX_SALARY` DOUBLE(11,2) NOT NULL,
  `SKILLS_REQUIRED` VARCHAR(100) NULL,
  PRIMARY KEY (`JOB_ID`),
  UNIQUE INDEX `JOB_TITLE_UNIQUE` (`TITLE` ASC))

ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`DEPARTMENTS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`DEPARTMENTS` (
  `DEPARTMENT_ID` INT(5) NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(50) NOT NULL,
  `ADDRESS` VARCHAR(100) NOT NULL,
  `DESCRIPTION` VARCHAR(500) NULL,
  `LOCATION_ID` INT(4) NOT NULL,
  PRIMARY KEY (`DEPARTMENT_ID`),
  INDEX `LOCATION_ID_idx` (`LOCATION_ID` ASC),
  CONSTRAINT `D_LOCATION_ID`
    FOREIGN KEY (`LOCATION_ID`)
    REFERENCES `mydb`.`LOCATIONS` (`LOCATION_ID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`EMPLOYEES_JOBS_ASSIGNMENTS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`EMPLOYEES_JOBS_ASSIGNMENTS` (
  `EMPLOYEE_ID` INT(9) NOT NULL,
  `JOB_ID` INT(7) NOT NULL,
  `SUPERVISOR_ID` INT(9) NOT NULL,
  `DEPARTMENT_ID` INT(5) NOT NULL,
  `START_DATE` DATE NOT NULL,
  `END_DATE` DATE NULL,
  `SALARY` DOUBLE(11,2) NOT NULL,
  `DESCRIPTION` VARCHAR(500) NULL,
  UNIQUE INDEX `EJA_EMPLOYEE_ID_UNIQUE` (`EMPLOYEE_ID` ASC),
  INDEX `EMPLOYEE_ID_idx` (`EMPLOYEE_ID` ASC),
  INDEX `JOB_ID_idx` (`JOB_ID` ASC),
  INDEX `SUPERVISOR_ID_idx` (`SUPERVISOR_ID` ASC),
  INDEX `DEPARTMENT_ID_idx` (`DEPARTMENT_ID` ASC),
  CONSTRAINT `EJS_EMPLOYEE_ID`
    FOREIGN KEY (`EMPLOYEE_ID`)
    REFERENCES `mydb`.`EMPLOYEES` (`EMPLOYEE_ID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `EJS_JOB_ID`
    FOREIGN KEY (`JOB_ID`)
    REFERENCES `mydb`.`JOBS` (`JOB_ID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `EJS_SUPERVISOR_ID`
    FOREIGN KEY (`SUPERVISOR_ID`)
    REFERENCES `mydb`.`EMPLOYEES` (`EMPLOYEE_ID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `EJS_DEPARTMENT_ID`
    FOREIGN KEY (`DEPARTMENT_ID`)
    REFERENCES `mydb`.`DEPARTMENTS` (`DEPARTMENT_ID`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
